---
title: 数据结构之（二）--- 单链表实现
abbrlink: 5faa822b
date: 2019-02-01 01:04:59
categories:
  - 算法/数据结构
  - 数据结构
tags:
  - 单链表
---

带头结点单链表ADT定义在头文件里(linkedList.h):

```c
#ifndef __LINKED_LIST_H

/**
 * 单链表ADT
 *
 *  包含头节点
 */


/**
 * 定义列表节点类型
 */
typedef int T;


/**
 * 链表的节点结构体
 * 具体成员定义放在实现文件中
 */
struct ListNode;


// 指向节点的指针
typedef struct ListNode *ptrToNode;
// 定义节点指针的别名
typedef ptrToNode List;
typedef ptrToNode Node;


/**
 * 创建一个孤儿节点
 * @param  x 
 * @return   
 */
Node createNode (T x);


/**
 * 初始化一个含头结点的空表
 * @return  
 */
List createList (void);


/**
 * 获取表大小
 * @param  list 
 * @return      
 */
int size (List list);


/**
 * 检测表是否是空表
 * @param  list 
 * @return      
 */
int isEmpty (List list);

/**
 * 查找x所在的第一个节点，不存在是返回NULL
 * 
 * @param  list 查找列表
 * @param  x    节点数值
 * @return      
 */
Node find (List list, T x);

/**
 * 查找第一个包含x的节点的前驱
 * @param  list 
 * @param  x    
 * @return      
 */
Node findPrevious (List list, T x);


/**
 * 查找最后的节点
 * @param  list 
 * @return      
 */
Node findLast (List list);

/**
 * 在所给节点前插入元素
 * @param list 
 * @param n    
 */
void insertBefore (List list, Node n, T x);


/**
 * 在所给节点后插入元素
 * @param list 
 * @param n    
 */
void insertAfter (List list, Node n, T x);



/**
 * 在表尾附加元素
 * @param list 
 * @param x    
 */
void append (List list, T x);

/**
 * 删除第一个包含x的节点
 * @param list 
 * @param x    
 */
void delete (List list, T x);


/**
 * 清空表
 * @param list 
 */
void deleteAll (List list);

/**
 * 翻转表
 * @param list 
 */
void reverse (List list);


/**
 * 展示列表数据
 * @param list 
 */
void show (List list);

/**
 * 显示unix风格的错误
 * @param msg 
 */
void unix_error (char *msg);


#endif /* __LINKED_LIST_H */
```

实现文件(linkedList.c):

```c
#include <stdlib.h>
#include <stdio.h>
#include "linkedList.h"

struct ListNode {
	T value;
	struct ListNode *next;
};
/**
 * 显示unix风格的错误
 * @param msg 
 */
void unix_error (char *msg) 
{
	printf("%s\n", msg);
	exit(0);
}


void *Malloc (size_t size) {
	void *p;
	if ((p = malloc(size)) == NULL)
		unix_error("malloc error!");
	return p;
}


/**
 * 创建一个孤儿节点
 * @param  x 
 * @return   
 */
Node createNode (T x) 
{
	Node node = (Node)Malloc(sizeof (struct ListNode));
	node->value = x; 
	node->next = NULL;

	return node;
}


/**
 * 初始化一个含头结点的空表
 * @return  
 */
List createList (void) 
{
	return (List)createNode(0);
}

/**
 * 获取表大小
 * @param  list 
 * @return      
 */
int size (List list) 
{
	int count = 0;
	Node tmp = list;

	while (tmp->next != NULL) {
		count++;
		tmp = tmp->next;
	}
	return count;
}


/**
 * 检测表是否是空表
 * @param  list 
 * @return      
 */
int isEmpty (List list) 
{
	return list->next == NULL;
}

/**
 * 查找x所在的第一个节点，不存在是返回NULL
 * 
 * @param  list 查找列表
 * @param  x    节点数值
 * @return      
 */
Node find (List list, T x)
{
	Node p = list->next;

	while (p->next != NULL && p->value != x)
		p = p->next;

	return p;
}



/**
 * 查找第一个包含x的节点的前驱
 * @param  list 
 * @param  x    
 * @return      
 */
Node findPrevious (List list, T x)
{
	Node p = list;

	while (p->next != NULL && p->next->value != x)
		p = p->next;

	return p;
}


/**
 * 查找最后的节点
 * @param  list 
 * @return      
 */
Node findLast (List list)
{
	Node p = list;

	while (p->next != NULL)
		p = p->next;

	return p;
}


/**
 * 在所给节点前插入元素
 * @param list 
 * @param n    
 */
void insertBefore (List list, Node n, T x)
{
	Node prev = findPrevious(list, n->value);
	
	Node new_node = createNode(x);
	new_node->next = n;
	prev->next = new_node;
}

/**
 * 在所给节点后插入元素
 * @param list 
 * @param n    
 */
void insertAfter (List list, Node n, T x)
{
	Node new_node = createNode(x);
	new_node->next = n->next;
	n->next = new_node;
}

/**
 * 在表尾附加元素
 * @param list 
 * @param x    
 */
void append (List list, T x)
{
	Node last_node = findLast(list);
	Node new_node = createNode(x);
	last_node->next = new_node;
}

/**
 * 删除第一个包含x的节点
 * @param list 
 * @param x    
 */
void delete (List list, T x)
{
	Node tmp;
	Node prev = findPrevious(list, x);

	if (prev != NULL && prev->next != NULL) {
		tmp = prev->next;
		prev->next = prev->next->next;
		free(tmp);
	}
}


/**
 * 清空表
 * @param list 
 */
void deleteAll (List list)
{
	Node tmp;
	Node p = list->next;
	while (p != NULL) {
		tmp = p->next;
		free(p);
		p = tmp;
	}
	list->next = NULL;
}

/**
 * 翻转表
 * @param list 
 */
void reverse (List list)
{

	Node prev = NULL;
	Node cur = list->next;

	while (cur != NULL) {
		Node tmp = cur->next;
		// 当前节点是尾节点
		if (tmp == NULL) {
			list->next = cur;
		}
		cur->next = prev;
		prev = cur;
		cur = tmp;
	}	
}

/**
 * 展示列表数据
 * @param list 
 */
void show (List list)
{
	Node p = list->next;
	if (p == NULL) {
		printf("当前列表为空\n");
		return ;
	}

	printf("头结点");
	while (p != NULL) {
		printf(" -> %d ", p->value);
		p = p->next;
	}
	printf("\n");
}
```

